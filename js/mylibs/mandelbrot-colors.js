// Generated by CoffeeScript 1.3.1
(function(){var a;a=function(){function f(a,c,d){var e,f=this;this.colorConverter=a;if(this.colorConverter==null||this.colorConverter.colorToRgb==null)throw"Cannot construct a Mandelbrot without a colorConverter that imlements colorToRgb({h:,s:,v:}).";this.coloringFunctions={hue:function(a){return f.colorConverter.colorToRgb({h:360*a/255,s:1,v:1})},monochrome:function(a){return{r:a,g:a,b:a}}};e=b(this.coloringFunctions.hue);this.settings={isBinary:!1,maxIterations:c,loopEvery:d,insideSetColor:{r:0,g:0,b:0},colorScheme:e}}var a,b,c,d,e=this;a=function(a,b){var e,f,g,h,i,j;h=a.canvas.width;e=a.canvas.height;f=a.createImageData(h,e);i=function(a){var e,g,i;g=function(e){var g;g=c(b[a][e]);d(f,e,a,g.r,g.g,g.b,255);return 0};for(e=i=0;0>h?i>=h:i<=h;e=0>h?--i:++i)g(e);return 0};for(g=j=0;0>e?j>=e:j<=e;g=0>e?--j:++j)i(g);return a.putImageData(f,0,0)};b=function(a){var b,c,d;d=[];for(b=c=0;c<=255;b=++c)d.push(a(b));return d};c=function(a){var b,c,d,e;e=f.settings.maxIterations;if(a<e){if(f.settings.isBinary)b=f.settings.colorScheme[0];else{d=f.settings.loopEvery;c=(a-Math.floor(a/d)*d)*(255/d);b=f.settings.colorScheme[c]}return b}return{r:f.settings.insideSetColor.r,g:f.settings.insideSetColor.g,b:f.settings.insideSetColor.b}};d=function(a,b,c,d,e,f,g){var h;h=(b+c*a.width)*4;a.data[h+0]=d;a.data[h+1]=e;a.data[h+2]=f;return a.data[h+3]=g};return f}.call(this)}).call(this);